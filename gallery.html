<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gallery — SBB Foundation</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    /* Reset & base */
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;color:#222;background:#fafafa}
    a{color:inherit}

    /* Header */
    header{
      background:#2d6cdf;padding:1rem 5%;display:flex;align-items:center;justify-content:space-between;flex-wrap:nowrap;gap:1rem;position:relative;
    }
    .logo{display:flex;gap:10px;align-items:center;flex-shrink:0}
    .logo img{height:50px;width:50px;object-fit:cover;border-radius:8px}
    .logo h1{color:white;font-size:1.2rem;font-weight:700}
    nav{display:flex;align-items:center;gap:.5rem}
    nav a{color:white;text-decoration:none;margin-left:1rem;font-weight:600}
    nav a:hover{color:#ffeb3b}

    /* mobile three-dot and panel */
    .mobile-menu{display:none;background:transparent;border:0;color:white;font-size:28px;padding:6px 8px;border-radius:8px;cursor:pointer}
    .mobile-panel{position:absolute;top:calc(100% + 8px);right:5%;background:white;color:#10203a;min-width:160px;border-radius:10px;box-shadow:0 12px 34px rgba(8,30,80,0.16);overflow:hidden;transform-origin:top right;z-index:1200;border:1px solid rgba(0,0,0,0.06);display:none}
    .mobile-panel.open{display:block;animation:panel-in .15s ease}
    @keyframes panel-in{from{opacity:0;transform:translateY(-6px) scale(.98)}to{opacity:1;transform:translateY(0) scale(1)}}
    .mobile-panel a{display:block;padding:12px 14px;color:#10203a;text-decoration:none;font-weight:600;border-bottom:1px solid rgba(16,32,58,0.04)}
    .mobile-panel a:last-child{border-bottom:none}
    .mobile-panel a:hover{background:#f4f7ff}

    @media (max-width:880px){
      nav{display:none}
      .mobile-menu{display:flex}
      header{padding-right:14%}
    }
    @media (max-width:360px){ .mobile-panel{right:6%;left:6%;min-width:unset} }

    /* ---------- HERO (matches your Services hero) ---------- */
    .hero {
      position: relative;
      min-height: 56vh;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      overflow:hidden;
      padding:3.5rem 2rem;
      background: url('images/services-bg.jpg') center/cover no-repeat;
      transition: transform 0.35s ease;
      will-change: transform;
    }

    .hero::after{
      content:"";
      position:absolute;
      inset:0;
      background: linear-gradient(180deg, rgba(0,0,0,0.44), rgba(0,0,0,0.18));
      pointer-events:none;
      z-index:0;
    }

    .hero::before{
      content:"";
      position:absolute;
      right:-6%;
      top:-8%;
      width:320px;
      height:320px;
      background: radial-gradient(circle at 30% 30%, rgba(255,203,51,0.08), rgba(45,108,223,0.04) 45%, transparent 60%);
      filter: blur(26px);
      transform: translateZ(0);
      z-index:0;
      pointer-events:none;
    }

    .hero-content{
      position:relative;
      z-index:2;
      max-width:920px;
      margin:auto;
      padding:2rem;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:14px;
    }

    .hero-title{
      font-size:2.6rem;
      font-weight:700;
      line-height:1.06;
      color:#fff;
      transform:translateY(18px);
      opacity:0;
      transition:all .7s cubic-bezier(.2,.9,.2,1);
    }
    .hero-lead{
      font-size:1.05rem;
      color:rgba(255,255,255,0.95);
      max-width:78ch;
      transform:translateY(14px);
      opacity:0;
      transition:all .7s .08s cubic-bezier(.2,.9,.2,1);
    }

    .hero-cta-row{ display:flex; gap:12px; align-items:center; flex-wrap:wrap; justify-content:center; margin-top:6px; }

    .btn{ border-radius:999px; padding:12px 18px; font-weight:700; text-decoration:none; cursor:pointer; display:inline-block; }
    .btn-primary{ background:#ffcf33; color:#10203a; box-shadow:0 10px 26px rgba(255,207,51,0.12); }
    .btn-ghost{ background:transparent; color:rgba(255,255,255,0.95); border:1px solid rgba(255,255,255,0.12); }
    .btn-primary:hover{ transform:translateY(-4px); }

    .chevron-wrap{ display:block; margin-top:12px; cursor:pointer; opacity:0.95; }
    .chev{ width:36px; height:36px; display:inline-block; transform-origin:center; animation:chev-bob 2s infinite; fill:rgba(255,255,255,0.95); }
    @keyframes chev-bob{ 0%{transform:translateY(0)}50%{transform:translateY(8px)}100%{transform:translateY(0)} }
    .chevron-wrap:hover .chev{ transform:translateY(10px) scale(1.02); }

    @media (max-width:900px){ .hero{ background-position:center 35%; } }
    @media (max-width:560px){ .hero{ min-height:46vh; padding:2.4rem 1.2rem } .hero-title{ font-size:1.9rem } .chev{ width:28px; height:28px } }

    /* ---------- END HERO ---------- */

    /* container & gallery controls */
    .container{max-width:1200px;margin:1.5rem auto;padding:0 5%}
    .controls{display:flex;gap:.6rem;align-items:center;flex-wrap:wrap;margin:8px 0}
    .left-controls{display:flex;gap:.5rem;align-items:center}
    .filter-btn{appearance:none;border:1px solid rgba(16,32,58,.06);background:#fff;padding:.45rem .8rem;border-radius:999px;font-weight:600;cursor:pointer;color:#10203a}
    .filter-btn[aria-pressed="true"]{background:#2d6cdf;color:#fff}

    /* grid */
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:12px}
    @media (max-width:980px){ .grid{grid-template-columns:repeat(2,1fr)} }
    @media (max-width:640px){ .grid{grid-template-columns:repeat(1,1fr)} }

    .tile{background:#fff;border-radius:10px;overflow:hidden;box-shadow:0 8px 28px rgba(8,30,80,0.06);display:flex;flex-direction:column}
    .tile img{display:block;width:100%;height:240px;object-fit:cover;cursor:pointer}
    .meta{padding:.6rem .8rem;display:flex;justify-content:space-between;align-items:center}
    .meta .title{font-weight:700;color:#1e3a8a;font-size:.95rem}
    .meta .tag{font-size:.82rem;color:#6b7280;background:#eef2ff;padding:.25rem .45rem;border-radius:999px}

    /* presentation overlay */
    .present{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.94);z-index:2000;padding:20px}
    .present.open{display:flex}
    .present-inner{width:100%;max-width:1400px;max-height:90vh;display:flex;flex-direction:column;align-items:center;gap:10px}
    .present-img{max-width:100%;max-height:80vh;border-radius:10px}
    .caption{color:#fff;background:rgba(0,0,0,0.3);padding:.4rem .7rem;border-radius:8px}
    .controls-row{display:flex;gap:8px;align-items:center;margin-top:6px}
    .ctrl{background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.08);color:#fff;padding:.5rem .8rem;border-radius:8px;cursor:pointer}
    .ctrl:focus{outline:3px solid #ffeb3b;outline-offset:3px}

    footer{background:#2d6cdf;color:#fff;text-align:center;padding:1.2rem;margin-top:2rem}
  </style>
</head>
<body>

  <!-- Header -->
  <header>
    <div class="logo" aria-hidden="false">
      <img src="images/logo.jpeg" alt="SBB Logo">
      <h1>SBB Foundation</h1>
    </div>

    <!-- Desktop nav -->
    <nav aria-label="Primary navigation">
      <a href="index.html">Home</a>
      <a href="about.html">About</a>
      <a href="services.html">Services</a>
      <a href="ventures.html">Ventures</a>
      <a href="gallery.html" aria-current="page">Gallery</a>
      <a href="contact.html">Contact</a>
    </nav>

    <!-- Mobile three-dot menu -->
    <button class="mobile-menu" id="mobileMenuBtn" aria-haspopup="true" aria-expanded="false" aria-controls="mobilePanel" title="Open menu">
      <span aria-hidden="true">⋮</span>
    </button>

    <div class="mobile-panel" id="mobilePanel" role="menu" aria-labelledby="mobileMenuBtn">
      <a href="index.html" role="menuitem" tabindex="0">Home</a>
      <a href="about.html" role="menuitem" tabindex="0">About</a>
      <a href="services.html" role="menuitem" tabindex="0">Services</a>
      <a href="ventures.html" role="menuitem" tabindex="0">Ventures</a>
      <a href="gallery.html" aria-current="page">Gallery</a>
      <a href="contact.html" role="menuitem" tabindex="0">Contact</a>
    </div>
  </header>

  <!-- Hero (matches your Services hero style & behavior) -->
  <section class="hero hero-gallery" aria-label="Gallery hero banner">
    <div class="hero-content">
      <h1 class="hero-title">Gallery</h1>
      <p class="hero-lead">Press releases and event photos — browse, present, and download.</p>

      <div class="hero-cta-row">
        <a class="btn btn-primary" href="#grid">Explore Photos</a>
        <a class="btn btn-ghost" href="contact.html">Contact Us</a>
      </div>

      <!-- chevron: scroll to grid -->
      <a class="chevron-wrap" id="scrollChevron" href="#grid" aria-label="Scroll to gallery">
        <svg class="chev" viewBox="0 0 24 24" role="img" aria-hidden="true">
          <path d="M12 16.5c-.3 0-.5-.1-.7-.3l-6-6a1 1 0 0 1 1.4-1.4L12 13.09l5.3-5.3a1 1 0 1 1 1.4 1.42l-6 6c-.2.2-.4.29-.7.29z"></path>
        </svg>
      </a>
    </div>
  </section>

  <!-- Main -->
  <main class="container">
    <div class="controls">
      <div class="left-controls" role="toolbar" aria-label="Filter gallery">
        <button class="filter-btn" data-filter="all" aria-pressed="true">All</button>
        <button class="filter-btn" data-filter="press" aria-pressed="false">Press Releases</button>
        <button class="filter-btn" data-filter="event" aria-pressed="false">Events</button>
      </div>
    </div>

    <section id="grid" class="grid" aria-live="polite" tabindex="-1"></section>
  </main>

  <!-- Presentation overlay -->
  <div id="present" class="present" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="present-inner" role="document">
      <img id="presentImg" class="present-img" src="" alt="">
      <div id="presentCaption" class="caption">Caption</div>
      <div class="controls-row">
        <button id="prevBtn" class="ctrl" aria-label="Previous">◀ Prev</button>
        <button id="playBtn" class="ctrl" aria-label="Play">Play</button>
        <button id="nextBtn" class="ctrl" aria-label="Next">Next ▶</button>
        <button id="downloadBtn" class="ctrl" aria-label="Download">⬇ Download</button>
        <button id="closeBtn" class="ctrl" aria-label="Close">✕ Close</button>
      </div>
    </div>
  </div>

  <footer><p>&copy; 2016 SBB Foundation | Software & Social Impact</p></footer>

  <script>
  (function(){
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    /* ------------- Mobile panel logic ------------- */
    const btn = document.getElementById('mobileMenuBtn');
    const panel = document.getElementById('mobilePanel');
    function closePanel(){ if(!panel) return; panel.classList.remove('open'); if(btn) btn.setAttribute('aria-expanded','false'); }
    function openPanel(){ if(!panel) return; panel.classList.add('open'); if(btn){ btn.setAttribute('aria-expanded','true'); btn.focus(); } }
    if(btn){
      btn.addEventListener('click', function(e){ e.stopPropagation(); const isOpen = panel.classList.contains('open'); if(isOpen) closePanel(); else openPanel(); });
      btn.addEventListener('keydown', function(e){ if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); btn.click(); } else if(e.key === 'Escape'){ closePanel(); } });
    }
    document.addEventListener('click', function(e){ if(!panel) return; if(panel.classList.contains('open') && !panel.contains(e.target) && e.target !== btn) closePanel(); });
    document.addEventListener('keydown', function(e){ if(e.key === 'Escape') closePanel(); });
    const panelLinks = panel ? panel.querySelectorAll('a') : []; panelLinks.forEach(link => link.addEventListener('click', ()=> closePanel()));

    /* ------------- Hero reveal + parallax ------------- */
    function revealHero(){
      const title = document.querySelector('.hero-title');
      const lead = document.querySelector('.hero-lead');
      if(title){ title.style.opacity = 1; title.style.transform = 'translateY(0)'; }
      if(lead){ lead.style.opacity = 1; lead.style.transform = 'translateY(0)'; }
    }

    // chevron scroll
    const chevron = document.getElementById('scrollChevron');
    if(chevron){
      chevron.addEventListener('click', function(e){
        e.preventDefault();
        const target = document.querySelector('#grid');
        if(target){
          target.scrollIntoView({behavior: prefersReduced ? 'auto' : 'smooth', block:'start'});
          if(!prefersReduced) setTimeout(()=>{ target.focus({preventScroll:true}); }, 500);
        }
      });
    }

    function attachParallax(){
      const hero = document.querySelector('.hero');
      if(!hero || prefersReduced) return;
      const intensity = 12;
      function onMove(e){
        const rect = hero.getBoundingClientRect();
        const cx = rect.left + rect.width/2;
        const cy = rect.top + rect.height/2;
        const clientX = e.touches ? e.touches[0].clientX : e.clientX;
        const clientY = e.touches ? e.touches[0].clientY : e.clientY;
        const dx = (clientX - cx) / rect.width;
        const dy = (clientY - cy) / rect.height;
        hero.style.transform = `translate3d(${dx * intensity * 0.12}px, ${dy * intensity * 0.05}px, 0)`;
        const posX = 50 + dx * 4;
        const posY = 35 + dy * 3;
        hero.style.backgroundPosition = `${posX}% ${posY}%`;
      }
      function onLeave(){ hero.style.transform=''; hero.style.backgroundPosition=''; }
      hero.addEventListener('mousemove', onMove);
      hero.addEventListener('mouseleave', onLeave);
      hero.addEventListener('touchmove', function(ev){ if(ev.touches && ev.touches[0]) onMove(ev.touches[0]); }, {passive:true});
    }

    document.addEventListener('DOMContentLoaded', function(){
      setTimeout(revealHero, 120);
      attachParallax();
    });


    /* ------------- Gallery app (client-only, remote folders) ------------- */

    const PRESS_FOLDER = 'images/press/';
    const EVENT_FOLDER = 'images/event/';
    const PRESS_COUNT = 49;
    const EVENT_COUNT = 71;
    const EXT = '.jpeg';

    const grid = document.getElementById('grid');
    const filterBtns = Array.from(document.querySelectorAll('.filter-btn'));

    const items = [];
    for (let i=1;i<=PRESS_COUNT;i++) items.push({src: PRESS_FOLDER + 'press' + i + EXT, title: 'Press ' + i, category: 'press'});
    for (let i=1;i<=EVENT_COUNT;i++) items.push({src: EVENT_FOLDER + 'event' + i + EXT, title: 'Event ' + i, category: 'event'});

    let currentFilter = 'all';
    function renderGrid(){
      grid.innerHTML = '';
      const filtered = items.filter(it => currentFilter === 'all' || it.category === currentFilter);
      filtered.forEach((it, idx) => {
        const tile = document.createElement('div'); tile.className = 'tile'; tile.setAttribute('data-index', idx);
        const img = document.createElement('img'); img.loading='lazy'; img.decoding='async'; img.src = it.src; img.alt = it.title; img.tabIndex = 0;
        img.addEventListener('click', ()=> openPresentation(idx));
        img.addEventListener('keydown', (e)=> { if(e.key==='Enter' || e.key===' '){ e.preventDefault(); openPresentation(idx); }});
        const meta = document.createElement('div'); meta.className='meta';
        const t = document.createElement('div'); t.className='title'; t.textContent = it.title;
        const tag = document.createElement('div'); tag.className='tag'; tag.textContent = it.category === 'press' ? 'Press' : 'Event';
        meta.appendChild(t); meta.appendChild(tag);
        tile.appendChild(img); tile.appendChild(meta); grid.appendChild(tile);
      });
    }

    filterBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        filterBtns.forEach(b => b.setAttribute('aria-pressed','false'));
        btn.setAttribute('aria-pressed','true');
        currentFilter = btn.getAttribute('data-filter');
        renderGrid();
      });
    });

    // presentation
    const present = document.getElementById('present');
    const presentImg = document.getElementById('presentImg');
    const presentCaption = document.getElementById('presentCaption');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const playBtn = document.getElementById('playBtn');
    const closeBtn = document.getElementById('closeBtn');
    const downloadBtn = document.getElementById('downloadBtn');

    let currentIndex = 0, isPlaying=false, timer=null, PLAY_INTERVAL=3000;
    function openPresentation(idx){
      const filtered = items.filter(it => currentFilter === 'all' || it.category === currentFilter);
      if(!filtered.length) return;
      currentIndex = idx;
      updatePresentationImage(filtered[currentIndex]);
      present.classList.add('open'); present.setAttribute('aria-hidden','false');
      document.body.style.overflow='hidden';
      stopPlay(); playBtn.textContent='Play'; playBtn.focus();
    }
    function updatePresentationImage(item){
      presentImg.src = item.src; presentImg.alt = item.title; presentCaption.textContent = item.title + ' — ' + (item.category === 'press' ? 'Press' : 'Event');
      downloadBtn.onclick = () => { const a = document.createElement('a'); a.href = item.src; a.download = (item.title || 'image') + EXT; document.body.appendChild(a); a.click(); a.remove(); };
    }
    function closePresentation(){ present.classList.remove('open'); present.setAttribute('aria-hidden','true'); presentImg.src=''; document.body.style.overflow=''; stopPlay(); }
    function prevImage(){ const filtered = items.filter(it => currentFilter === 'all' || it.category === currentFilter); if(!filtered.length) return; currentIndex = (currentIndex - 1 + filtered.length) % filtered.length; updatePresentationImage(filtered[currentIndex]); }
    function nextImage(){ const filtered = items.filter(it => currentFilter === 'all' || it.category === currentFilter); if(!filtered.length) return; currentIndex = (currentIndex + 1) % filtered.length; updatePresentationImage(filtered[currentIndex]); }
    function startPlay(){ if(isPlaying) return; isPlaying=true; playBtn.textContent='Pause'; timer = setInterval(()=> nextImage(), PLAY_INTERVAL); }
    function stopPlay(){ isPlaying=false; playBtn.textContent='Play'; if(timer){ clearInterval(timer); timer=null; } }
    function togglePlay(){ if(isPlaying) stopPlay(); else startPlay(); }

    prevBtn.addEventListener('click', ()=> { stopPlay(); prevImage(); });
    nextBtn.addEventListener('click', ()=> { stopPlay(); nextImage(); });
    playBtn.addEventListener('click', ()=> togglePlay());
    closeBtn.addEventListener('click', ()=> closePresentation());
    document.addEventListener('keydown', (e) => {
      if (present.classList.contains('open')) {
        if (e.key === 'ArrowLeft') { stopPlay(); prevImage(); }
        if (e.key === 'ArrowRight') { stopPlay(); nextImage(); }
        if (e.key === ' ' || e.key === 'Spacebar') { e.preventDefault(); togglePlay(); }
        if (e.key === 'Escape') { closePresentation(); }
      }
    });
    present.addEventListener('click', (e) => { if (e.target === present) closePresentation(); });

    // Initial render
    renderGrid();

  })();
  </script>
</body>
</html>
